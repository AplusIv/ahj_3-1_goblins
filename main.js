(()=>{"use strict";var e={p:""};const t=e.p+"images/2dbd01ce16c0fa83cb67.png",i=document.createElement("img");i.src=t,i.alt="Goblin pic";const s=new class{constructor(e,t,i,s){if("string"==typeof e){const t=document.createElement("ul");t.classList=e,this.element=t}this.fieldHolesNumber=t,this.imgElement=i,this.scoresCounter=document.querySelector(".scores-counter"),this.missesCounter=document.querySelector(".misses-counter"),this.movingHandler=s}renderField(){for(let e=0;e<=this.fieldHolesNumber;e+=1){const t=document.createElement("li");t.classList="hole",t.dataset.position=e,this.element.appendChild(t)}document.body.insertBefore(this.element,document.querySelector("h1").nextElementSibling)}renderImg(){this.interval=setInterval((()=>this.movingHandler(this.element.children,this.imgElement)),2e3)}removeImg(e){this.imgElement=e.removeChild(this.imgElement)}getRandom(){return Math.round(Math.random()*this.fieldHolesNumber)}getNewPosition(){const e=this.getRandom();return e===this.previous?(console.log(`Одинаковые this.getRandom() = ${e} и this.previous = ${this.previous}, повторям рандом`),this.getNewPosition()):(console.log(`возвращаю ${e} позицию для отрисовки в новом месте`),e)}isGameOver(e){Number(this.missesCounter.textContent)===e&&(this.missesCounter.textContent=0,this.scoresCounter.textContent=0,clearInterval(this.interval),clearTimeout(this.timeout),this.renderImg(),alert(`Вы проиграли (не попали по цели ${e} раз). \n      Начните сначала, может, у вас будут шансы остановить эту шайтан-машину в следующий раз :)`))}}("container",15,i,(function(e,t){this.newRandomPosition=this.getNewPosition();for(const i of e)i.dataset.position===String(this.newRandomPosition)&&(i.appendChild(t),this.previous=this.newRandomPosition);this.timeout=setTimeout((()=>{this.missesCounter=document.querySelector(".misses-counter");let e=Number(this.missesCounter.textContent);e+=1,this.missesCounter.textContent=e,this.isGameOver(5)}),2e3)}));s.renderField(),s.renderImg();const n=new class{constructor(e){this.gamefield=e,this.element=this.gamefield.element,this.onBoardClick=this.onBoardClick.bind(this),this.element.addEventListener("click",this.onBoardClick)}onBoardClick(e){const t=e.target.closest("li");if(t.querySelector("img")){let e=+this.gamefield.scoresCounter.textContent;e+=1,this.gamefield.scoresCounter.textContent=e,clearInterval(this.gamefield.interval),clearTimeout(this.gamefield.timeout),this.gamefield.removeImg(t),this.gamefield.renderImg()}}}(s);console.log(n)})();